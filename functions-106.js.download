/*! (c) 2020 Jagex Limited */


document.domain="runescape.com";var OSRS=OSRS||{};OSRS.global={trackingPixel:function(a){return $.ajax({url:"https://www.runescape.com/track/"+a,dataType:"jsonp",success:function(){}}),!1},trackingEvent:function(a,b,c,d){var e="gaEvent";c=c||!1,d=d||!1,d&&(e="gaEventNI"),a.forEach(function(a){window.dataLayer.push({event:e,gaEventCat:b,gaEventAct:a,eventCallback:function(){if(c)return c()}})})},init:function(){}},OSRS.home={init:function(){JXGLOBAL.user.agent.init(),"Android"===JXGLOBAL.user.agent.os?$(".home-nav__link--mobile").attr("href","https://play.google.com/store/apps/details?id=com.jagex.oldscape.android&referrer=utm_source%3Dproduct-website"):"iOS"===JXGLOBAL.user.agent.os&&$(".home-nav__link--mobile").attr("href","https://apps.apple.com/app/apple-store/id1269648762?pt=311318&ct=product-website&mt=8")}},OSRS.download={dataAttributes:{downloadButton:"download-btn"},init:function(){OSRS.download.mobileLink(),window.dataLayer=window.dataLayer||[],$("[data-"+OSRS.download.dataAttributes.downloadButton+"]").on("click",function(a){a.preventDefault();var b=$(this);dataLayer.push({event:"gaEvent",gaEventCat:"Download",gaEventAct:"Oldschool Runescape Game Client",gaEventLab:b.data(OSRS.download.dataAttributes.downloadButton),eventCallback:OSRS.download.forwardToAddress(b.attr("href"))})})},forwardToAddress:function(a){location.href=a},mobileLink:function(){JXGLOBAL.user.agent.init();var a=$("#download-mobile");"iOS"===JXGLOBAL.user.agent.os?(a.attr("href","https://apps.apple.com/app/apple-store/id1269648762?pt=311318&ct=product-website&mt=8"),a.attr("data-"+OSRS.download.dataAttributes.downloadButton,"iOS")):"Android"===JXGLOBAL.user.agent.os&&(a.attr("href","https://play.google.com/store/apps/details?id=com.jagex.oldscape.android&referrer=utm_source%3Dproduct-website"),a.attr("data-"+OSRS.download.dataAttributes.downloadButton,"Android"))}},OSRS.gamePage={javaVersion:"1.6.0_10+",hasJava:!1,hasMac:!1,isChrome:!1,showThanksScreen:function(){OSRS.global.trackingEvent(["os-game-launched"],"Play",null,!0),$("#thanksScreen").addClass("thanks-screen--show"),$("#launchingScreen,#unsupportedScreen").remove()},showInstallScreen:function(){OSRS.global.trackingEvent(["os-game-not-installed"],"Play",null,!0),$("#installScreen").addClass("install-screen--show"),$("#launchingScreen,#thanksScreen,#unsupportedScreen").remove()},showGame:function(){OSRS.global.trackingEvent(["os-game-in-browser"],"Play",null,!0);var a=$("#gameFrame");a.attr("src",worldLink),a.addClass("game-frame--show"),$("#noJavaScreens").remove()},init:function(){$("#noJsError").remove(),$(".not-loading").addClass("not-loading--show"),JXGLOBAL.user.agent.init(),OSRS.gamePage.hasJava=deployJava.versionCheck(OSRS.gamePage.javaVersion),OSRS.gamePage.hasJava&&"Mac OS"!==JXGLOBAL.user.agent.os?OSRS.gamePage.showGame():($("#gameFrame").remove(),$(".not-loading__link").on("click",function(){OSRS.gamePage.showInstallScreen()}),"Edge"===JXGLOBAL.user.agent.browser?OSRS.gamePage.showInstallScreen():(checkProtocol(gameProtocol,JXGLOBAL.user.agent.browser),setTimeout(function(){protocolSupport[gameProtocol]?OSRS.gamePage.showThanksScreen():OSRS.gamePage.showInstallScreen()},7e3)))}},OSRS.grandExchange={data:null,options:null,chartObj:null,formatter:null,tradeData:null,tradeOptions:null,tradeChartObj:null,ticker:function(){$("#ticker").find(".ticker-wrap").webTicker({speed:50,direction:"left",moving:!0,startEmpty:!1,duplicate:!1,rssurl:!1,rssfrequency:0,updatetype:"reset"})},chart:function(){OSRS.grandExchange.formatter=new google.visualization.NumberFormat({pattern:"#,###"}),this.drawChart(average30,trade30),$("#filter a").on("click",function(a){a.preventDefault();var b,c,d=$(this),e=d.parent(),f=d.parents("ul");e.hasClass("active")||(f.find(".active").removeClass("active"),e.addClass("active"),b=window["average"+d[0].hash.substr(1)],c=window["trade"+d[0].hash.substr(1)],OSRS.grandExchange.data=google.visualization.arrayToDataTable(b),OSRS.grandExchange.tradeData=google.visualization.arrayToDataTable(c),b==average30?OSRS.grandExchange.options.pointSize=5:OSRS.grandExchange.options.pointSize=3,OSRS.grandExchange.formatter.format(OSRS.grandExchange.data,1),OSRS.grandExchange.formatter.format(OSRS.grandExchange.tradeData,1),$("#toggleTrend").is(":checked")?OSRS.grandExchange.formatter.format(OSRS.grandExchange.data,2):OSRS.grandExchange.data.removeColumn(2),OSRS.grandExchange.renderChart(),OSRS.grandExchange.renderTradeChart())}),$("#toggleTrend").on("change",function(){if($(this).is(":checked")){var a=window["average"+$("#filter .active a")[0].hash.substr(1)];OSRS.grandExchange.data=google.visualization.arrayToDataTable(a),OSRS.grandExchange.formatter.format(OSRS.grandExchange.data,1),OSRS.grandExchange.formatter.format(OSRS.grandExchange.data,2)}else OSRS.grandExchange.data.removeColumn(2);OSRS.grandExchange.renderChart()})},drawChart:function(a,b){OSRS.grandExchange.data=google.visualization.arrayToDataTable(a),OSRS.grandExchange.tradeData=google.visualization.arrayToDataTable(b),OSRS.grandExchange.data.removeColumn(2),OSRS.grandExchange.formatter.format(OSRS.grandExchange.data,1),OSRS.grandExchange.formatter.format(OSRS.grandExchange.tradeData,1),OSRS.grandExchange.options={animation:{duration:1e3,startup:!0},chartArea:{left:60,height:"90%",width:"85%",backgroundColor:{stroke:"#382418",strokeWidth:2}},backgroundColor:"transparent",legend:{position:"none"},pointSize:5,pointShape:"circle",pointsVisible:!0,series:{0:{color:"#78adff"},1:{color:"#ff6100"}},hAxis:{baselineColor:"#382418",textStyle:{color:"white"},gridlines:{color:"#382418",count:-1},minorGridlines:{color:"transparent",count:0},titleTextStyle:{color:"transparent"}},vAxis:{baselineColor:"#382418",format:"short",textStyle:{color:"white"},gridlines:{color:"#382418",count:-1},title:"GP",titleTextStyle:{color:"white"}},width:587},OSRS.grandExchange.tradeOptions={animation:{duration:1e3,startup:!0},backgroundColor:"transparent",chartArea:{left:60,height:"90%",width:"85%",backgroundColor:{stroke:"#382418",strokeWidth:2}},legend:{position:"none"},hAxis:{baselineColor:"#382418",textStyle:{color:"white"},gridlines:{color:"transparent",count:-1},minorGridlines:{color:"transparent",count:0},titleTextStyle:{color:"transparent"}},series:{0:{color:"#78adff"}},vAxis:{baselineColor:"#382418",format:"short",textStyle:{color:"white"},gridlines:{color:"#382418",count:-1},title:"Total",titleTextStyle:{color:"white"},minValue:0,viewWindow:{min:0}},width:587},"Chrome"!==JXGLOBAL.user.agent.browser&&(OSRS.grandExchange.options.hAxis.gridlines.color="transparent"),OSRS.grandExchange.chartObj=new google.visualization.LineChart(document.getElementById("itemchart")),this.renderChart(),showTradeVolumes&&(OSRS.grandExchange.tradeChartObj=new google.visualization.ColumnChart(document.getElementById("countchart")),this.renderTradeChart())},renderChart:function(){OSRS.grandExchange.chartObj.draw(OSRS.grandExchange.data,OSRS.grandExchange.options)},renderTradeChart:function(){OSRS.grandExchange.tradeChartObj.draw(OSRS.grandExchange.tradeData,OSRS.grandExchange.tradeOptions)},init:function(){JXGLOBAL.user.agent.init(),$("#ticker").length&&this.ticker(),"undefined"!=typeof average30&&this.chart()}},OSRS.login={init:function(){"use strict";$("#login-form").on("submit",function(a){var b=$("#google-recaptcha"),c=$("#google-recaptcha-error");b.length&&"undefined"!=typeof grecaptcha&&""==grecaptcha.getResponse()&&(a.preventDefault(),c.addClass("c-google-recaptcha-error--visibility-show"),""!=$("#login-username").val()&&""!=$("#login-password").val()?$(".login-error").remove():c.removeClass("c-google-recaptcha-error--visibility-show"))})}},OSRS.logout={redirect:function(){"use strict";"undefined"!=typeof homeRedirect&&(location.href=homeRedirect)},init:function(){"use strict";setTimeout("OSRS.logout.redirect()",15e3)}},OSRS.openJDK={init:function(){$("#play-btn").on("click",function(){$("#failed-launch").addClass("failed-launch--show")})}},OSRS.premierClub={getPrices:function(){$.ajax({url:billingStoreUrl,timeout:3e3,dataType:"json",success:function(a){for(var b,c,d,e=0;e<a.results.length;e++)b=a.results[e],c=$("#premier-offer-continue-"+e),d=packageBaseUrl+b.packageGroup,$("#premier-offer-price-"+e).text(b.localisedPrice),c.attr("href",d)}})},init:function(){OSRS.premierClub.getPrices()}},OSRS.onLoad={init:function(){"use strict";var a=document.getElementsByTagName("body")[0].id;switch(OSRS.global.init(),a){case"game-page":OSRS.gamePage.init();break;case"grandexchange":OSRS.grandExchange.init();break;case"os-home":OSRS.home.init();break;case"os-download":OSRS.download.init();break;case"login-page":OSRS.login.init();break;case"logout-page":OSRS.logout.init();break;case"os-openjdk":OSRS.openJDK.init();break;case"premier":case"single-package":OSRS.premierClub.init()}}},$(document).ready(OSRS.onLoad.init());